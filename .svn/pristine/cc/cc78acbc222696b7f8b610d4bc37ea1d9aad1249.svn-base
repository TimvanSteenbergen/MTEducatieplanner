!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("react"),require("react-dom"),require("dijit/registry"),require("dojo/_base/connect"));else if("function"==typeof define&&define.amd)define(["react","react-dom","dijit/registry","dojo/_base/connect"],e);else{var n="object"==typeof exports?e(require("react"),require("react-dom"),require("dijit/registry"),require("dojo/_base/connect")):e(t.react,t["react-dom"],t["dijit/registry"],t["dojo/_base/connect"]);for(var o in n)("object"==typeof exports?exports:t)[o]=n[o]}}(this,function(t,e,n,o){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(e,n){e.exports=t},function(t,e,n){var o,r;/*!
  Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";function n(){for(var t=[],e=0;e<arguments.length;e++){var o=arguments[e];if(o){var r=typeof o;if("string"===r||"number"===r)t.push(o);else if(Array.isArray(o))t.push(n.apply(null,o));else if("object"===r)for(var a in o)i.call(o,a)&&o[a]&&t.push(a)}}return t.join(" ")}var i={}.hasOwnProperty;void 0!==t&&t.exports?t.exports=n:(o=[],void 0!==(r=function(){return n}.apply(e,o))&&(t.exports=r))}()},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__assign||Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t};o=[n,e,n(0),n(4),n(5),n(1),n(3),n(6),n(7),n(9),n(10)],void 0!==(r=function(t,e,n,o,r,s,u,p,c,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d=function(t){function e(e){var n=t.call(this,e)||this;return n.state={alertMessage:"",findingListviewWidget:!0},n.updateSort=n.updateSort.bind(n),n.validateListView=n.validateListView.bind(n),n.navigationHandler=u.connect(e.mxform,"onNavigation",n,n.validateListView),n}return i(e,t),e.prototype.render=function(){return n.createElement("div",{className:s("widget-drop-down-sort",this.props.class),style:l.parseStyle(this.props.style)},n.createElement(c.ValidateConfigs,a({},this.props,{queryNode:this.state.targetNode,targetListview:this.state.targetListView,validate:!this.state.findingListviewWidget})),this.renderDropDown())},e.prototype.componentDidMount=function(){var t=o.findDOMNode(this).parentNode,e=c.ValidateConfigs.findTargetNode(t);this.showLoader(e)},e.prototype.componentWillUnmount=function(){u.disconnect(this.navigationHandler)},e.prototype.renderDropDown=function(){return this.state.validationPassed?n.createElement(p.DropDown,{onDropDownChangeAction:this.updateSort,options:l.createOptionProps(this.props.sortAttributes),style:l.parseStyle(this.props.style)}):null},e.prototype.validateListView=function(){if(!this.state.validationPassed){var t=o.findDOMNode(this).parentNode,e=c.ValidateConfigs.findTargetNode(t),n=null;e&&(this.setState({targetNode:e}),(n=r.byNode(e))&&this.setState({targetListView:n}));var i=c.ValidateConfigs.validate(a({},this.props,{queryNode:this.state.targetNode,targetListview:this.state.targetListView,validate:!this.state.findingListviewWidget}));this.setState({findingListviewWidget:!1,validationPassed:!i})}},e.prototype.updateSort=function(t,e){var n=this,o=this.state,r=o.targetNode,i=o.targetListView,a=o.validationPassed;i&&r&&a&&(this.showLoader(r),i._datasource._sorting=[[t,e]],i.update(null,function(){n.hideLoader(r)}))},e.prototype.showLoader=function(t){t&&t.classList.add("widget-drop-down-sort-loading")},e.prototype.hideLoader=function(t){t&&t.classList.remove("widget-drop-down-sort-loading")},e}(n.Component);e.default=d}.apply(e,o))&&(t.exports=r)},function(t,e){t.exports=o},function(t,n){t.exports=e},function(t,e){t.exports=n},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(0)],void 0!==(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var n=t.call(this,e)||this;return n.state={value:n.getDefaultValue()},n.handleChange=n.handleChange.bind(n),n.renderOptions=n.renderOptions.bind(n),n.callOnChangeAction=n.callOnChangeAction.bind(n),n.getDefaultValue=n.getDefaultValue.bind(n),n.callOnChangeAction(n.state.value),n}return i(e,t),e.prototype.render=function(){return n.createElement("select",{className:"form-control",onChange:this.handleChange,value:this.state.value},this.renderOptions())},e.prototype.getDefaultValue=function(){return this.props.options.forEach(function(t){var e=t.value;if(t.defaultSelected)return e}),this.props.options[0].value},e.prototype.renderOptions=function(){return this.props.options.map(function(t){var e=t.caption,o=t.value,r={className:"",key:o,label:e,value:o};return n.createElement("option",r,e)})},e.prototype.handleChange=function(t){var e=t.currentTarget.value;this.setState({value:e}),this.callOnChangeAction(e)},e.prototype.callOnChangeAction=function(t){var e=this.props.options.filter(function(e){return e.value===t}),n=e.pop();n&&this.props.onDropDownChangeAction&&this.props.onDropDownChangeAction(n.name,n.sort)},e}(n.Component);e.DropDown=o}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(0),n(8)],void 0!==(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){return"Custom widget "+t+" Error in configuration: "+e},a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.render=function(){return n.createElement(o.Alert,{bootstrapStyle:"danger",className:"widget-drop-down-sort-alert",message:this.props.validate?e.validate(this.props):""})},e.validate=function(t){if(!t.queryNode)return r(t.friendlyId,"unable to find a list view on the page");if(t.inWebModeler)return"";var n=t.targetListview&&t.targetListview.datasource&&t.targetListview.datasource.type;return!n||"microflow"!==n&&"entityPath"!==n?t.targetListview&&!e.isCompatible(t.targetListview)?r(t.friendlyId,"this Mendix version is incompatible"):"":r(t.friendlyId,"widget is only compatible with list view data source type 'Database' and 'XPath'")},e.isCompatible=function(t){return!!(t&&t.update&&t.datasource&&t.datasource.type&&("database"===t.datasource.type||"xpath"===t.datasource.type)&&t._datasource&&t._datasource._entity&&t._datasource._sorting)},e.findTargetNode=function(t){for(var e=null;!e&&t&&!(e=t.querySelectorAll(".mx-listview")[0]);)t=t.parentNode;return e},e.itContains=function(t,e){return t.indexOf(e)>-1},e}(n.Component);e.ValidateConfigs=a}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(0),n(1)],void 0!==(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Alert=function(t){return t.message?n.createElement("div",{className:o("alert alert-"+t.bootstrapStyle,t.className)},t.message):null},e.Alert.displayName="Alert"}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e],void 0!==(r=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createOptionProps=function(t){return t.map(function(t,e){var n=t.name;return{name:n,caption:t.caption,defaultSelected:t.defaultSelected,sort:t.sort,value:n+"-"+e}})},e.parseStyle=function(t){void 0===t&&(t="");try{return t.split(";").reduce(function(t,e){var n=e.split(":");if(2===n.length){t[n[0].trim().replace(/(-.)/g,function(t){return t[1].toUpperCase()})]=n[1].trim()}return t},{})}catch(e){window.console.log("Failed to parse style",t,e)}return{}}}.apply(e,o))&&(t.exports=r)},function(t,e){}])});